$(function(){function e(){c()}function n(){M.removeClass("active"),I.addClass("active")}function t(){k=f(y.val().trim()),k&&(T=!0,U.emit("register",{username:k}))}function a(){var e=f(b.val().trim())}function s(){var e=h.val();e=f(e),e&&U.emit("send message",{message:e,targetUser:"currentFriend"})}function o(e,n){var t=$("<li>").addClass("log").text(e);l(t,n)}function i(e,n){var t=$('<span class="username"/>').text(e.username),a=$('<span class="messageBody">').text(e.message),s=$('<li class="message"/>').data("username",e.username).addClass(typingClass).append(t,a);l(s,n)}function c(){console.log("currently connected: "+T),T&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(r,u,{}),setTimeout(c,5e3)}function r(e){var n=e.coords.latitude,t=e.coords.longitude;U.emit("update location",{lat:n,lng:t}),console.log("updated location "+n+", "+t)}function u(e){alert(e)}function l(e,n){var t=$(e);n||(n={}),"undefined"==typeof n.fade&&(n.fade=!0),"undefined"==typeof n.prepend&&(n.prepend=!1),n.fade&&t.hide().fadeIn(g),n.prepend?x.prepend(t):x.append(t),x[0].scrollTop=x[0].scrollHeight}function d(){}function f(e){return $("<div/>").text(e).text()}var g=150,m=400,p=["#e21400","#91580f","#f8a700","#f78b00","#58dc00","#287b00","#a8f07a","#4ae8c4","#3b88eb","#3824aa","#a700ff","#d300e7"],v=$(window),y=$("#usernameInput"),C=$("#registerUsernameInput"),b=$("#friendInput"),x=$(".messages"),h=$(".inputMessage"),B=$("#setNamesButton"),I=$("#conversation-list"),M=$("#setup"),k,w,N=[],T=!1,U=io.connect("http://172.26.101.113:3000/");$("#sendMessageButton").click(function(){s()}),$("#changeNameButton").click(function(){t()}),U.on("login result",function(e){e.success?(T=!0,displayConnectionSuccess()):alert(e.errorMessage)}),U.on("available",function(e){}),U.on("incoming message",function(e){console.log("got message "+e),i(e)}),U.on("register result",function(e){e.success?(k=e.username,T=!0):alert(e.errorMessage)}),$(document).ready(function(){e()})});